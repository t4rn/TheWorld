!function(){"use strict";function t(t,e){var s=this;s.tripName=t.tripName,s.stops=[],s.errorMessage="",s.isBusy=!0,s.newStop={};var n="/api/trips/"+s.tripName+"/stops/";e.get(n).then(function(t){angular.copy(t.data,s.stops),o(s.stops)},function(t){s.errorMessage="Failed to load stops: "+t}).finally(function(){s.isBusy=!1}),s.addStop=function(){s.errorMessage="",s.isBusy=!0,console.log(s.newStop),e.post(n,s.newStop).then(function(t){s.stops.push(t.data),o(s.stops),s.newStop={}},function(t){s.errorMessage="Failed to add new stop: "+t}).finally(function(){s.isBusy=!1})},s.deleteStop=function(t){s.errorMessage="";var r=s.stops[t];console.log(r);var a=r.name;console.log("stopName: "+a),s.isBusy=!0,e.delete(n+a).then(function(){var e="Stop"+a+" deleted successfully!";console.log(e),s.stops.splice(t,1),o(s.stops)},function(t){var o=JSON.stringify(t);s.errorMessage="Failed to delete stop, error: "+o}).finally(function(){s.isBusy=!1})}}function o(t){if(t&&t.length>0){var o=_.map(t,function(t){return{lat:t.latitude,long:t.longitude,info:t.name}});travelMap.createMap({stops:o,selector:"#map",currentStop:1,initialZoom:5})}}t.$inject=["$routeParams","$http"],angular.module("app-trips").controller("tripEditorController",t)}();